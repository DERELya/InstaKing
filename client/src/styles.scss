@use '@angular/material' as mat;

/* ========================================= */
/* 1. Глобальные переменные (Темы)           */
/* ========================================= */
:root {
  /* Базовые переменные для переопределения Material Progress Bar */
  --color-progress: #49edd4;
  --color-progress-track: rgba(255,255,255,0.3);

  /* Светлая тема (Light Default) */
  --color-bg: #f5f5f7;
  --color-bg-dark: #e7e7e7;
  --color-text: #121212;
  --color-primary: #49edd4;
  --color-border: rgba(0, 0, 0, 0.1); /* Сделал чуть видимым, иначе границ нет */
  --border-radius: 16px;
  --box-shadow: 0 6px 32px 0 rgba(0,0,0,0.1);

  @include mat.progress-bar-overrides((
    active-indicator-color: var(--color-progress),
    track-color: var(--color-progress-track),
  ));
}

body.dark-theme {
  /* Темная тема */
  --color-bg: #232323;
  --color-bg-dark: #181a1b;
  --color-text: #f5f5f7;
  --color-primary: #49edd4;
  --color-border: rgba(255, 255, 255, 0.1);
  --border-radius: 16px;
  --box-shadow: 0 6px 32px 0 rgba(0,0,0,0.5);
}

/* ========================================= */
/* 2. Базовый сброс и Лейаут                 */
/* ========================================= */
html, body {
  height: 100%;
  margin: 0;
  padding: 0;
  background-color: var(--color-bg) !important;
  color: var(--color-text);
  font-family: Roboto, "Helvetica Neue", sans-serif;
  overflow-x: hidden; /* Убираем горизонтальный скролл */
}

app-root {
  display: block;
  width: 100%;
  height: 100%;
  background-color: var(--color-bg);
  color: var(--color-text);
}

/* Класс для блокировки скролла (используется в Direct) */
.chat-mode-locked {
  overflow: hidden !important;
  height: 100% !important;
  position: fixed;
  width: 100%;
}

/* ========================================= */
/* 3. Глобальные фиксы Angular Material      */
/* ========================================= */

/* --- Фон диалоговых окон (Модалки) --- */
/* MDC структура: container -> surface. Красить нужно surface */
.mat-mdc-dialog-container .mdc-dialog__surface {
  background-color: var(--color-bg) !important;
  color: var(--color-text) !important;
  border-radius: var(--border-radius) !important;
  box-shadow: var(--box-shadow) !important;
}

/* --- Фон Меню (Dropdown) --- */
.mat-mdc-menu-panel,
.mat-mdc-menu-content {
  background-color: var(--color-bg) !important;
  color: var(--color-text) !important;
}

/* --- Фон Сайдбара (Drawer/Sidenav) --- */
.mat-drawer-container,
.mat-drawer-inner-container,
.mat-sidenav-content {
  background-color: var(--color-bg) !important;
  color: var(--color-text) !important;
}

/* --- Фон Карточек --- */
.mat-mdc-card {
  background-color: var(--color-bg) !important;
  color: var(--color-text) !important;
}

/* --- Автокомплит (Выпадающий список поиска) --- */
.mat-mdc-autocomplete-panel {
  background-color: var(--color-bg) !important;
  color: var(--color-text) !important;
  border: 1px solid var(--color-border) !important;
  box-shadow: 0 8px 32px rgba(0,0,0,0.5) !important;
}

/* Опции в выпадающих списках */
.mat-mdc-option {
  background-color: var(--color-bg) !important;
  color: var(--color-text) !important;
}
.mat-mdc-option:hover,
.mat-mdc-option.mat-mdc-option-active {
  background-color: var(--color-bg-dark) !important;
  color: var(--color-primary) !important;
}

/* ========================================= */
/* 4. Поля ввода (Inputs / Form Fields)      */
/* ========================================= */

/* Убираем серый фон у полей Material Design */
.mat-mdc-text-field-wrapper,
.mdc-text-field--filled,
.mdc-text-field--no-label {
  background: transparent !important;
}

/* Цвет границ (Outline) */
.mat-mdc-form-field .mat-mdc-text-field-wrapper {
  --mdc-outlined-text-field-outline-color: var(--color-border) !important;
  --mdc-outlined-text-field-hover-outline-color: var(--color-primary) !important;
  --mdc-outlined-text-field-focus-outline-color: var(--color-primary) !important;
  --mdc-outlined-text-field-caret-color: var(--color-primary) !important;
}

/* Форсируем цвет рамки */
.mdc-text-field--focused .mdc-notched-outline,
.mdc-text-field:hover .mdc-notched-outline {
  border-color: var(--color-primary) !important;
}

/* Цвет лейбла (плавающего текста) */
.mat-mdc-form-field.mat-focused .mat-mdc-floating-label,
.mat-mdc-form-field:hover .mat-mdc-floating-label {
  color: var(--color-primary) !important;
}

/* Цвет текста внутри инпута */
.mat-mdc-input-element {
  color: var(--color-text) !important;
  caret-color: var(--color-primary) !important;
}

/* Фикс автозаполнения браузера (чтобы не становился белым/желтым) */
input:-webkit-autofill,
input:-webkit-autofill:focus,
input:-webkit-autofill:hover,
input:-webkit-autofill:active {
  box-shadow: 0 0 0 1000px var(--color-bg) inset !important;
  -webkit-text-fill-color: var(--color-text) !important;
  transition: background-color 5000s ease-in-out 0s;
  caret-color: var(--color-primary) !important;
}

/* ========================================= */
/* 5. Кастомные классы (Твои компоненты)     */
/* ========================================= */

/* --- Custom Menu Items (Профиль/Выход) --- */
.my-custom-menu .mat-mdc-menu-panel {
  border-radius: 13px !important;
  min-width: 170px !important;
  box-shadow: 0 8px 32px rgba(0,0,0,0.5) !important;
  padding: 0 !important;
  border: none !important;
  overflow: hidden; /* Важно для скругления */
}

.my-custom-menu-item.mat-mdc-menu-item {
  background: var(--color-bg) !important;
  color: var(--color-text) !important; /* Исправил жесткий серый цвет */
  transition: background 0.15s, color 0.15s !important;
  display: flex !important;
  align-items: center !important;
  border-bottom: 1px solid var(--color-border) !important;
}

.my-custom-menu-item.mat-mdc-menu-item:last-child {
  border-bottom: none !important;
}

.my-custom-menu-item.mat-mdc-menu-item:hover,
.my-custom-menu-item.mat-mdc-menu-item.cdk-focused {
  background: var(--color-bg-dark) !important;
  color: var(--color-primary) !important;
}

/* Кнопка выхода (красная) */
.my-custom-menu-item.mat-mdc-menu-item:last-child:hover {
  background: #3a2323 !important;
  color: #ff5c5c !important;
}

.my-custom-menu-item .mat-mdc-menu-item-text {
  font-weight: 500 !important;
  color: inherit !important;
}

/* --- Специфичные модалки --- */

/* Прозрачный фон для панели создания поста (если нужно) */
.custom-create-post-modal .mat-mdc-dialog-container .mdc-dialog__surface {
  background: none !important;
  box-shadow: none !important;
}

/* Модалка истории */
.custom-create-story-modal .mat-mdc-dialog-container .mdc-dialog__surface {
  background-color: var(--color-bg) !important;
  border-radius: 24px !important;
  padding: 0 !important;
}

/* Диалог лайков (Сброс стилей контейнера) */
.custom-likes-dialog-panel .mat-mdc-dialog-container {
  /* Сам контейнер делаем невидимым, чтобы контент внутри решал */
  background: transparent !important;
  box-shadow: none !important;
  padding: 0 !important;
}
.custom-likes-dialog-panel .mdc-dialog__surface {
  background: transparent !important;
  box-shadow: none !important;
}
/* ========================================= */
/* 6. СТИЛИЗАЦИЯ ПОЛОСЫ ПРОКРУТКИ (SCROLLBAR)*/
/* ========================================= */

/* --- Для Webkit (Chrome, Edge, Safari, Opera) --- */

/* Ширина полосы прокрутки */
::-webkit-scrollbar {
  width: 8px;           /* Вертикальный скролл */
  height: 8px;          /* Горизонтальный скролл */
}

/* "Дорожка" (фон), по которой ездит ползунок */
::-webkit-scrollbar-track {
  background: transparent; /* Прозрачный фон, чтобы было видно цвет сайта */
}

/* Сам "Ползунок" */
::-webkit-scrollbar-thumb {
  background-color: rgba(128, 128, 128, 0.4); /* Нейтральный серый, полупрозрачный */
  border-radius: 10px;    /* Закругленные края */
  border: 2px solid transparent; /* Отступ от края, чтобы скролл казался тоньше */
  background-clip: content-box;  /* Важно для отступа */
}

/* Ползунок при наведении мыши */
::-webkit-scrollbar-thumb:hover {
  background-color: var(--color-primary); /* Подсветка твоим акцентным цветом */
  /* Или просто более серый, если не хочешь цветной: background-color: rgba(128, 128, 128, 0.7); */
}

/* Уголок между вертикальным и горизонтальным скроллом */
::-webkit-scrollbar-corner {
  background: transparent;
}


/* --- Для Firefox (использует стандарт CSS) --- */
* {
  /* thin - тонкий, auto - обычный */
  scrollbar-width: thin;

  /* Цвет ползунка | Цвет дорожки */
  /* Используем полупрозрачный серый и прозрачный фон */
  scrollbar-color: rgba(128, 128, 128, 0.4) transparent;
}

/* Специфично для темной темы в Firefox (если нужно перебить) */
.dark-theme * {
  scrollbar-color: #555 #232323;
}
