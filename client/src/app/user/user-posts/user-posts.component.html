<div class="feed" *ngIf="isUserPostsLoaded">

  <div class="add-post-btn">
    <button mat-flat-button color="primary" routerLink="/profile/add">Add Post</button>
  </div>

  <h2>{{ posts.length }} posts</h2>

  <mat-card class="post-card" *ngFor="let post of posts; let i = index">
    <mat-card-header>
      <div mat-card-avatar class="post-avatar">
        <img [src]="post.author?.avatarUrl || 'assets/blank-avatar.png'" />
      </div>
      <mat-card-title>{{ post.author?.username }}</mat-card-title>
      <mat-card-subtitle>{{ post.location }}</mat-card-subtitle>
    </mat-card-header>

    <img mat-card-image [src]="post.image" class="post-image" alt="post" />

    <mat-card-content>
      <div class="post-actions">
        <span>{{ post.likes }} likes</span>
      </div>

      <p class="caption">
        <b>{{ post.author?.username }}</b> {{ post.caption }}
      </p>

      <div class="comment" *ngFor="let c of post.comments; let ci = index">
        <b>{{ c.username }}</b> {{ c.message }}
        <button mat-icon-button color="accent" (click)="deleteComment(c.id!, i, ci)">
          <mat-icon>clear</mat-icon>
        </button>
      </div>
    </mat-card-content>

    <mat-card-actions align="end">
      <button mat-button color="warn" (click)="removePost(post, i)">
        <mat-icon>delete</mat-icon> Remove
      </button>
    </mat-card-actions>
  </mat-card>
</div>
