<div class="direct-layout">

  <!-- Сайдбар (Список чатов) -->
  <aside class="sidebar">
    <!-- Слушаем событие запроса нового чата из списка (если там есть кнопка "Новый чат") -->
    <app-chat-list
      (newChatRequested)="openUserSelectionModal()">
    </app-chat-list>
  </aside>

  <!-- Основная область -->
  <main class="chat-main">

    <!-- Если чат выбран -> Показываем окно чата -->
    <ng-container *ngIf="activeConversation$ | async as active; else noChatTemplate">
      <!-- Передаем активный чат внутрь окна -->
      <app-chat-window [conversation]="active"></app-chat-window>
    </ng-container>

    <!-- Если чат НЕ выбран -> Показываем заглушку -->
    <ng-template #noChatTemplate>
      <div class="empty-state">
        <div class="empty-icon-circle">
          <span class="material-icons-outlined empty-icon">forum</span>
        </div>
        <h3>Ваши сообщения</h3>
        <p>Отправляйте личные сообщения другу или группе.</p>
        <button (click)="openUserSelectionModal()" class="start-btn">Написать сообщение</button>
      </div>
    </ng-template>

  </main>
</div>
